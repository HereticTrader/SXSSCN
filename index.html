<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SXSSCN GOD MODE Radar</title>
  <style>
    body { background: #000; color: white; font-family: monospace; padding: 2rem; }
    h1 { text-align: center; color: #00ffff; }
    input, button { font-size: 1rem; padding: 0.3rem 0.6rem; margin-top: 0.5rem; }
    #tableWidth { width: 60px; }
    table { width: var(--table-width, 600px); margin-top: 1rem; border-collapse: collapse; font-size: 0.85rem; margin-left: auto; margin-right: auto; }
    th, td { padding: 0.4rem; text-align: center; border: 1px solid #444; }
    th { background: #111; color: yellow; }
    .god { background-color: #000f0f; color: #00ffff; font-weight: bold; }
    .strong { background-color: #0f0f00; color: #ff00ff; font-weight: bold; }
    .ok { background-color: #111122; color: #8888ff; font-weight: bold; }
    .deltaSpike::after { content: ' ‚ö°'; color: yellow; }
    canvas { background: #111; border: 1px solid #444; display: block; margin: 1rem auto; }
  </style>
</head>
<body>
  <h1>SXSSCN - SUPER STRONG EMA SCANNER</h1>

  <label for="symbols">Paste Symbols (comma separated):</label><br>
  <input type="text" id="symbols" style="width: 100%;" value="BTCUSDT,ALCHUSDT,ARCHUSDT,FUNUSDT,TSTUSDT,TRUMPUSDT,XRPUSDT" />
  <br>
  <label for="tableWidth">Table Width:</label>
  <input type="number" id="tableWidth" value="600" oninput="document.documentElement.style.setProperty('--table-width', this.value + 'px')">
  <button onclick="scan()">üîç Scan Now</button>

  <table>
    <thead>
      <tr>
        <th>Symbol</th>
        <th>Status</th>
        <th>Last Price</th>
      </tr>
    </thead>
    <tbody id="results"></tbody>
  </table>

  <h1>üìä SOIXIOS Custom Chart <span style='font-size: 0.8rem; color: #888;'>v1.9</span></h1>
  <div style="display: flex; justify-content: center; align-items: center; gap: 1rem; margin-bottom: 1rem;">
    <label for="symbol">Symbol:</label>
    <input type="text" id="symbol" value="BTCUSDT" style="width: 120px; text-align: center; font-weight: bold;">
    <button onclick="applySettings()">Load</button>
  </div>
  <h2 id="chartLabel" style="text-align: center; color: yellow; margin-top: 1rem;">Loading BTCUSDT 1m Chart...</h2>
  <div style="text-align:center; margin-bottom: 1rem;">
    <label for="emaThickness">EMA Line Width:</label>
    <input type="range" id="emaThickness" min="1" max="5" value="2">
    <span id="thicknessLabel">2</span> px
  </div>
  <div style="display: flex; justify-content: center; gap: 2rem; margin-bottom: 0.5rem;">
    <div style="width: 400px; text-align: center; font-size: 0.9rem; color: yellow;">1 Minute</div>
    <div style="width: 400px; text-align: center; font-size: 0.9rem; color: yellow;">5 Minutes</div>
    <div style="width: 400px; text-align: center; font-size: 0.9rem; color: yellow;">15 Minutes</div>
  </div>
  <div style="display: flex; justify-content: center; gap: 2rem; margin-bottom: 2rem;">
    <div style="text-align: center;">
      <canvas id="chart1" width="450" height="420"></canvas>
      <div id="signal1" style="margin-top: 0.5rem; font-weight: bold;">...</div>
    </div>
    <div style="text-align: center;">
      <canvas id="chart2" width="450" height="420"></canvas>
      <div id="signal2" style="margin-top: 0.5rem; font-weight: bold;">...</div>
    </div>
    <div style="text-align: center;">
      <canvas id="chart3" width="450" height="420"></canvas>
      <div id="signal3" style="margin-top: 0.5rem; font-weight: bold;">...</div>
    </div>
  </div>

  <script>
    const EMA = (data, length) => {
      const k = 2 / (length + 1);
      let ema = data[0];
      return data.map((val, i) => i === 0 ? ema : ema = val * k + ema * (1 - k));
    };

    async function fetch1m(symbol) {
      try {
        const res = await fetch(`https://fapi.binance.com/fapi/v1/klines?symbol=${symbol}&interval=1m&limit=250`);
        const raw = await res.json();
        return raw.map(c => ({ close: parseFloat(c[4]), buyVol: parseFloat(c[9]) }));
      } catch {
        return [];
      }
    }

    async function scan() {
      const list = document.getElementById("symbols").value.split(",").map(s => s.trim().toUpperCase());
      const tbody = document.getElementById("results");
      const newRows = [];

      for (let symbol of list) {
        const raw = await fetch1m(symbol);
        if (raw.length < 233) continue;
        const closePrices = raw.map(r => r.close);
        const volume = raw.map(r => r.buyVol);

        const close = closePrices.at(-1);
        const ema2 = EMA(closePrices, 2).at(-1);
        const ema8 = EMA(closePrices, 8).at(-1);
        const ema13 = EMA(closePrices, 13).at(-1);
        const ema34 = EMA(closePrices, 34).at(-1);
        const ema55 = EMA(closePrices, 55).at(-1);
        const ema144 = EMA(closePrices, 144).at(-1);
        const ema233 = EMA(closePrices, 233).at(-1);

        let signal = "";
        let css = "";

        if (close > ema2 && ema2 > ema8 && ema8 > ema13 && ema13 > ema34 && ema34 > ema55 && ema55 > ema144 && ema144 > ema233) {
          signal = "SUPER STRONG ‚úÖ";
          css = "god";
        } else if (close > ema2 && ema2 > ema8 && ema8 > ema13 && ema13 > ema34 && ema34 > ema55) {
          signal = "STRONG ‚úÖ";
          css = "strong";
        } else if (ema2 > ema8 && ema8 > ema13) {
          signal = "NORMAL ‚ö†Ô∏è";
          css = "ok";
        }

        const deltaSpike = volume.at(-1) > volume.at(-2) * 2 ? ' deltaSpike' : '';

        const row = `<tr id="row-${symbol}" class="${css}${deltaSpike}"><td>${symbol}</td><td>${signal}</td><td>${close.toFixed(6)}</td></tr>`;
        newRows.push(row);
      }

      tbody.innerHTML = newRows.join("");
    }

    setInterval(scan, 5000);
    scan();
  </script>
</body>
</html>
