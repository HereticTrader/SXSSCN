<!DOCTYPE html>
<html>
<head>
  <title>Futures Order Book Velocity</title>
  <style>
    body { background: #000; color: #0f0; font-family: monospace; padding: 20px; }
    h1 { color: #0ff; }
    .velocity { font-size: 1.8em; margin-top: 10px; }
    .highlight { color: #ff0; }
  </style>
</head>
<body>
  <h1>BTC/USDT Futures Velocity Sniffer</h1>
  <div>Top Bid: <span id="topBid">...</span></div>
  <div>Top Ask: <span id="topAsk">...</span></div>
  <div>Bid Size: <span id="bidQty">...</span></div>
  <div>Ask Size: <span id="askQty">...</span></div>
  <div class="velocity">Velocity: <span id="velocity">0</span></div>
  <div>Bid/Ask Pressure: <span id="pressure">0</span></div>

  <script>
    const bidEl = document.getElementById("topBid");
    const askEl = document.getElementById("topAsk");
    const bidQtyEl = document.getElementById("bidQty");
    const askQtyEl = document.getElementById("askQty");
    const velocityEl = document.getElementById("velocity");
    const pressureEl = document.getElementById("pressure");

    let lastBid = null, lastAsk = null, lastTime = Date.now();

    const socket = new WebSocket("wss://fstream.binance.com/ws/alchusdt@depth");


    socket.onmessage = (event) => {
      const data = JSON.parse(event.data);
      const bid = parseFloat(data.bids[0][0]);
      const ask = parseFloat(data.asks[0][0]);
      const bidQty = parseFloat(data.bids[0][1]);
      const askQty = parseFloat(data.asks[0][1]);

      const now = Date.now();
      const timeDiff = (now - lastTime) / 1000;

      if (lastBid !== null && lastAsk !== null && timeDiff > 0) {
        const bidMove = Math.abs(bid - lastBid);
        const askMove = Math.abs(ask - lastAsk);
        const velocity = ((bidMove + askMove) / timeDiff).toFixed(5);
        const pressure = ((bidQty / (askQty + 0.00001)) * 100).toFixed(1);

        velocityEl.textContent = velocity;
        pressureEl.textContent = pressure + " %";

        // Visual alert
        velocityEl.className = velocity > 5 ? "velocity highlight" : "velocity";
      }

      lastBid = bid;
      lastAsk = ask;
      lastTime = now;

      bidEl.textContent = bid;
      askEl.textContent = ask;
      bidQtyEl.textContent = bidQty.toFixed(2);
      askQtyEl.textContent = askQty.toFixed(2);
    };
  </script>
</body>
</html>
