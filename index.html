<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SXSSCN GOD MODE Radar</title>
  <style>
    body { background: #000; color: white; font-family: monospace; padding: 2rem; }
    h1 { text-align: center; color: #00ffff; }
    input, button { font-size: 1rem; padding: 0.3rem 0.6rem; margin-top: 0.5rem; }
    #tableWidth { width: 60px; }

    table { width: var(--table-width, 600px); margin-top: 1rem; border-collapse: collapse; font-size: 0.85rem; margin-left: auto; margin-right: auto; }
    th, td { padding: 0.4rem; text-align: center; border: 1px solid #444; }
    th { background: #111; color: yellow; }

    .ema-none    { background-color: #111122; color: gray; font-weight: bold; }
    .ema-long    { background-color: #001111; color: #00ffff; font-weight: bold; }
    .ema-long-2  { background-color: #002222; color: #00ffff; font-weight: bold; }
    .ema-long-3  { background-color: #004444; color: #00ffff; font-weight: bold; }
    .ema-short   { background-color: #110011; color: #ff00ff; font-weight: bold; }
    .ema-short-2 { background-color: #220022; color: #ff00ff; font-weight: bold; }
    .ema-short-3 { background-color: #440044; color: #ff00ff; font-weight: bold; }
  </style>
</head>
<body>
  <h1>SXSSCN - SUPER STRONG EMA SCANNER</h1>
  <label for="symbols">Paste Symbols (comma separated):</label><br>
  <input type="text" id="symbols" style="width: 100%;" value="BTCUSDT,ALCHUSDT,ARCUSDT,FUNUSDT,TSTUSDT,TRUMPUSDT,XRPUSDT" />
  <br>
  <label for="tableWidth">Table Width:</label>
  <input type="number" id="tableWidth" value="600" oninput="document.documentElement.style.setProperty('--table-width', this.value + 'px')">
  <button onclick="scan()">üîç Scan Now</button>

  <table>
    <thead>
      <tr><th>Symbol</th><th>Status</th><th>Last Price</th></tr>
    </thead>
    <tbody id="results"></tbody>
  </table>

  <h1>üìä SOIXIOS Custom Chart <span style='font-size: 0.8rem; color: #888;'>v1.9</span></h1>
  <div style="display: flex; justify-content: center; align-items: center; gap: 1rem; margin-bottom: 1rem;">
    <label for="symbol">Symbol:</label>
    <input type="text" id="symbol" value="ALCHUSDT" style="width: 120px; text-align: center; font-weight: bold;">
    <button onclick="applySettings()">Load</button>
  </div>

  <h2 id="chartLabel" style="text-align: center; color: yellow; margin-top: 1rem;">Loading BTCUSDT 1m Chart...</h2>

  <div style="text-align:center; margin-bottom: 1rem;">
    <label for="emaThickness">EMA Line Width:</label>
    <input type="range" id="emaThickness" min="1" max="5" value="2">
    <span id="thicknessLabel">2</span> px
  </div>

  <div style="text-align:center; margin-bottom: 1rem;">
    <label for="chartWidth">Chart Width:</label>
    <input type="number" id="chartWidth" value="450" style="width: 80px;">
    &nbsp;
    <label for="chartHeight">Chart Height:</label>
    <input type="number" id="chartHeight" value="420" style="width: 80px;">
    <button onclick="resizeCharts()">Apply Size</button>
  </div>

  <div style="display: flex; justify-content: center; gap: 2rem; margin-bottom: 0.5rem;">
    <div style="width: 400px; text-align: center; font-size: 0.9rem; color: yellow;">1 Minute</div>
    <div style="width: 400px; text-align: center; font-size: 0.9rem; color: yellow;">5 Minutes</div>
    <div style="width: 400px; text-align: center; font-size: 0.9rem; color: yellow;">15 Minutes</div>
  </div>

  <div style="display: flex; justify-content: center; gap: 2rem; margin-bottom: 2rem;">
    <div style="text-align: center;">
      <canvas id="chart1"></canvas>
      <div id="signal1" style="margin-top: 0.5rem; font-weight: bold;">...</div>
    </div>
    <div style="text-align: center;">
      <canvas id="chart2"></canvas>
      <div id="signal2" style="margin-top: 0.5rem; font-weight: bold;">...</div>
    </div>
    <div style="text-align: center;">
      <canvas id="chart3"></canvas>
      <div id="signal3" style="margin-top: 0.5rem; font-weight: bold;">...</div>
    </div>
  </div>

  <script>
    // ... existing code above remains unchanged ...

    function drawChart(canvasId, signalId, data, ema8, ema13) {
      const canvas = document.getElementById(canvasId);
      const ctx = canvas.getContext("2d");
      const padding = 40;
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      const w = canvas.width - 2 * padding;
      const h = canvas.height - 2 * padding;
      const candleWidth = w / data.length;
      const highs = data.map(d => d.high);
      const lows = data.map(d => d.low);
      const max = Math.max(...highs);
      const min = Math.min(...lows);
      const y = p => padding + h - ((p - min) / (max - min)) * h;

      const ema2 = calculateEMA(data, 2);
      let condition = "EMA NONE";
      if (ema2.at(-1) > ema8.at(-1) && ema8.at(-1) > ema13.at(-1)) {
        condition = "EMA LONG ‚ñ≤"; document.getElementById(signalId).style.color = "#00ff00";
      } else if (ema2.at(-1) < ema8.at(-1) && ema8.at(-1) < ema13.at(-1)) {
        condition = "EMA SHORT üîª"; document.getElementById(signalId).style.color = "#ff00ff";
      } else {
        document.getElementById(signalId).style.color = "gray";
      }
      document.getElementById(signalId).textContent = condition;

      data.forEach((d, i) => {
        const x = padding + i * candleWidth;
        const color = ema2[i] > ema8[i] && ema8[i] > ema13[i] ? "#00ff00" : ema2[i] < ema8[i] && ema8[i] < ema13[i] ? "#ff00ff" : "gray";
        ctx.strokeStyle = color;
        ctx.beginPath();
        ctx.moveTo(x + candleWidth / 2, y(d.high));
        ctx.lineTo(x + candleWidth / 2, y(d.low));
        ctx.stroke();
        ctx.fillStyle = color;
        ctx.fillRect(x, y(Math.max(d.open, d.close)), candleWidth - 1, Math.abs(y(d.open) - y(d.close)) || 1);
      });

      function drawLine(ema, color) {
        ctx.beginPath();
        ctx.strokeStyle = color;
        ctx.lineWidth = parseFloat(document.getElementById("emaThickness").value);
        ema.forEach((val, i) => {
          const x = padding + i * candleWidth + candleWidth / 2;
          const yPos = y(val);
          if (i === 0) ctx.moveTo(x, yPos);
          else ctx.lineTo(x, yPos);
        });
        ctx.stroke();
        ctx.lineWidth = 1;
      }
      drawLine(ema8, "#00ffff");
      drawLine(ema13, "#ff00ff");

      const lastPrice = data.at(-1).close;
      ctx.fillStyle = "yellow";
      ctx.font = "bold 12px monospace";
      ctx.textAlign = "right";
      ctx.fillText(lastPrice.toFixed(4), canvas.width - 10, y(lastPrice));
      ctx.fillStyle = "#888";
      ctx.fillText("H: " + max.toFixed(4), canvas.width - 10, 20);
      ctx.fillText("L: " + min.toFixed(4), canvas.width - 10, canvas.height - 10);
      ctx.textAlign = "left";
    }
  </script>
</body>
</html>
